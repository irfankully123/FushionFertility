let today=new Date,dates=[],daysOfWeek=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]; let appointments = {!! json_encode($appointments) !!};const dayMap={Monday:"monDate",Tuesday:"tueDate",Wednesday:"wedDate",Thursday:"thuDate",Friday:"friDate",Saturday:"satDate",Sunday:"sunDate"};for(let t=0;t<7;t++){let t=daysOfWeek[today.getDay()],e=today.toLocaleDateString();dates.push({day:t,date:e}),today.setDate(today.getDate()+1)}dates.forEach((function(t){let e=t.day.toLowerCase();if(document.getElementById(e).textContent=t.date,dayMap.hasOwnProperty(t.day)){const e=dayMap[t.day],n=document.getElementById(e);n&&(n.value=t.date)}}));const hiddenInput=document.getElementById("timeValue"),hiddenInputDate=document.getElementById("dateValue"),buttonTags=document.querySelectorAll("button.timing");buttonTags.forEach((t=>{t.addEventListener("click",(function(){buttonTags.forEach((t=>{t.classList.remove("selected")})),this.classList.add("selected"),hiddenInput.value=this.querySelector("span:first-child").innerHTML.trim()}))}));const buttons=document.querySelectorAll("li button.timing"),hiddenInputDay=document.getElementById("day");function formatTime(t){return t.startsWith("0")&&(t=t.substring(1)),t}function formatDate(t){let e=t.split("/");return e[0]+"/"+e[1]+"/"+e[2]}buttons.forEach((t=>{t.addEventListener("click",(function(){const t=this.closest("li"),e=t.querySelector("input.dayValue"),n=t.querySelector("input.dateValue");hiddenInputDay.value=e.value,hiddenInputDate.value=n.value}))})),appointments.forEach((function(t){let e=t.appointment_time,n=t.appointment_date;document.querySelectorAll(".timing").forEach((function(t){let a=t.querySelector("span:first-child").innerText.trim(),r=t.parentElement.querySelector(".dateValue").value,d=formatTime(a),o=formatDate(n);if(d===e&&r===o){let e=document.createElement("a");e.href="#",e.classList.add("disabled"),e.classList.add("timing"),e.innerHTML=t.innerHTML,t.parentNode.replaceChild(e,t)}}))}));const currentDate=new Date,currentTime=60*currentDate.getHours()+currentDate.getMinutes();function getCurrentDate(){const t=currentDate.getFullYear();return(currentDate.getMonth()+1).toString().padStart(2,"0")+"/"+currentDate.getDate().toString().padStart(2,"0")+"/"+t}const currentDateStore=getCurrentDate(),previousButtons=document.querySelectorAll("button.timing");previousButtons.forEach((t=>{const e=t.parentElement.querySelector(".dateValue").value;if(e===currentDateStore||e===currentDateStore.replace(/^0/,"")){const e=t.querySelector("span").innerText.trim(),n=parseInt(e.split(":")[0]),a=parseInt(e.split(":")[1].split(" ")[0]),r=e.split(" ")[1];if(n%12*60+a+("PM"===r?720:0)<currentTime){const e=document.createElement("a");e.href="#",e.classList.add("disabled"),e.classList.add("timing"),e.innerHTML=t.innerHTML,t.parentNode.replaceChild(e,t)}else{const e=n.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")+" "+r;t.querySelector("span").innerText=e}}})),document.getElementById("appointmentForm").addEventListener("submit",(function(t){document.querySelector("button.selected")||(t.preventDefault(),alert("Please select a time for your appointment."))}));
